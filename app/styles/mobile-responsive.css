/* ===== تحسينات الهواتف النقالة ===== */

/* Theme CSS Variables */
:root {
  /* Default theme colors (will be overridden by ThemeProvider) */
  --theme-primary: #3b82f6;
  --theme-primary-hover: #2563eb;
  --theme-primary-active: #1d4ed8;
  --theme-secondary: #64748b;
  --theme-accent: #8b5cf6;
  
  /* Background colors */
  --theme-bg-primary: #ffffff;
  --theme-bg-secondary: #f8fafc;
  --theme-bg-tertiary: #f1f5f9;
  --theme-bg-depth1: #f9fafb;
  --theme-bg-depth2: #f3f4f6;
  --theme-bg-depth3: #e5e7eb;
  
  /* Text colors */
  --theme-text-primary: #1f2937;
  --theme-text-secondary: #6b7280;
  --theme-text-tertiary: #9ca3af;
  --theme-text-inverse: #ffffff;
  
  /* Border colors */
  --theme-border-primary: #d1d5db;
  --theme-border-secondary: #e5e7eb;
  --theme-border-focus: var(--theme-primary);
  
  /* Status colors */
  --theme-status-success: #10b981;
  --theme-status-warning: #f59e0b;
  --theme-status-error: #ef4444;
  --theme-status-info: #3b82f6;
  
  /* Surface colors */
  --theme-surface-elevated: #ffffff;
  --theme-surface-overlay: rgba(0, 0, 0, 0.5);
  --theme-surface-card: #ffffff;
  
  /* Theme settings */
  --theme-font-size: 16px;
  --theme-border-radius: 8px;
  
  /* Mobile-specific variables */
  --mobile-header-height: 56px;
  --mobile-nav-height: 60px;
  --mobile-tab-height: 40px;
  --mobile-button-height: 40px;
  --mobile-input-height: 40px;
  --mobile-spacing-xs: 4px;
  --mobile-spacing-sm: 8px;
  --mobile-spacing-md: 12px;
  --mobile-spacing-lg: 16px;
  --mobile-spacing-xl: 20px;
  --mobile-border-radius-sm: 6px;
  --mobile-border-radius-md: 8px;
  --mobile-border-radius-lg: 12px;
}

/* Dark theme overrides */
.theme-dark {
  --theme-bg-primary: #0f172a;
  --theme-bg-secondary: #1e293b;
  --theme-bg-tertiary: #334155;
  --theme-text-primary: #f1f5f9;
  --theme-text-secondary: #cbd5e1;
  --theme-text-tertiary: #94a3b8;
  --theme-border-primary: #475569;
  --theme-border-secondary: #334155;
  --theme-surface-overlay: rgba(0, 0, 0, 0.8);
}

/* High contrast theme */
.theme-high-contrast {
  --theme-text-primary: #000000;
  --theme-bg-primary: #ffffff;
  --theme-border-primary: #000000;
}

.theme-dark.theme-high-contrast {
  --theme-text-primary: #ffffff;
  --theme-bg-primary: #000000;
  --theme-border-primary: #ffffff;
}

/* Reduced motion */
.theme-reduced-motion * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* No animations */
.theme-no-animations * {
  animation: none !important;
  transition: none !important;
}

/* Smooth transitions for theme changes */
* {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.theme-reduced-motion *,
.theme-no-animations * {
  transition: none !important;
}

/* Custom keyframes for smooth transitions */
@keyframes theme-fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* =====  تحسينات رئيسية للهواتف النقالة ===== */

/* تصغير جميع العناصر للهواتف النقالة */
@media (max-width: 768px) {
  /* تحسين Header */
  header {
    height: var(--mobile-header-height) !important;
    padding: var(--mobile-spacing-sm) var(--mobile-spacing-md) !important;
    min-height: var(--mobile-header-height) !important;
  }
  
  header .text-2xl {
    font-size: 1.25rem !important;
  }
  
  header .text-xl {
    font-size: 1rem !important;
  }
  
  header .text-lg {
    font-size: 0.875rem !important;
  }
  
  header .text-sm {
    font-size: 0.75rem !important;
  }
  
  header button {
    height: var(--mobile-button-height) !important;
    padding: var(--mobile-spacing-xs) var(--mobile-spacing-sm) !important;
    font-size: 0.75rem !important;
    border-radius: var(--mobile-border-radius-sm) !important;
  }
  
  header .gap-2 {
    gap: var(--mobile-spacing-xs) !important;
  }
  
  header .gap-4 {
    gap: var(--mobile-spacing-sm) !important;
  }
  
  header .px-3 {
    padding-left: var(--mobile-spacing-sm) !important;
    padding-right: var(--mobile-spacing-sm) !important;
  }
  
  header .py-1\.5 {
    padding-top: var(--mobile-spacing-xs) !important;
    padding-bottom: var(--mobile-spacing-xs) !important;
  }
  
  /* تحسين Control Panel للهواتف النقالة */
  .control-panel-mobile {
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    margin: 0 !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
  }
  
  [class*="w-[1200px]"] {
    width: 100vw !important;
  }
  
  [class*="h-[90vh]"] {
    height: 100vh !important;
  }
  
  [class*="rounded-2xl"] {
    border-radius: 0 !important;
  }
  
  /* تصغير padding و margins في Control Panel */
  .control-panel-content {
    padding: var(--mobile-spacing-md) !important;
  }
  
  .px-6 {
    padding-left: var(--mobile-spacing-md) !important;
    padding-right: var(--mobile-spacing-md) !important;
  }
  
  .py-4 {
    padding-top: var(--mobile-spacing-sm) !important;
    padding-bottom: var(--mobile-spacing-sm) !important;
  }
  
  .p-6 {
    padding: var(--mobile-spacing-md) !important;
  }
  
  .gap-4 {
    gap: var(--mobile-spacing-sm) !important;
  }
  
  .gap-6 {
    gap: var(--mobile-spacing-md) !important;
  }
  
  .space-x-4 > :not([hidden]) ~ :not([hidden]) {
    margin-left: var(--mobile-spacing-sm) !important;
  }
  
  /* تصغير النصوص */
  .text-xl {
    font-size: 1rem !important;
    line-height: 1.375 !important;
  }
  
  .text-lg {
    font-size: 0.875rem !important;
    line-height: 1.25 !important;
  }
  
  .text-sm {
    font-size: 0.75rem !important;
    line-height: 1.125 !important;
  }
  
  .text-xs {
    font-size: 0.625rem !important;
    line-height: 1 !important;
  }
  
  /* تصغير الأزرار */
  button {
    min-height: var(--mobile-button-height) !important;
    padding: var(--mobile-spacing-xs) var(--mobile-spacing-md) !important;
    font-size: 0.75rem !important;
    border-radius: var(--mobile-border-radius-sm) !important;
  }
  
  .w-8 {
    width: 1.75rem !important;
    height: 1.75rem !important;
  }
  
  .h-8 {
    width: 1.75rem !important;
    height: 1.75rem !important;
  }
  
  /* تصغير التبويبات في Control Panel */
  .grid-cols-4 {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
  
  .lg\\:grid-cols-4 {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
  
  .sm\\:grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
  
  /* تصغير Tab Tiles */
  .aspect-\\[1\\.5\\/1\\] {
    aspect-ratio: 1.2 / 1 !important;
  }
  
  /* تصغير الأيقونات */
  .w-4 {
    width: 0.875rem !important;
    height: 0.875rem !important;
  }
  
  .h-4 {
    width: 0.875rem !important;
    height: 0.875rem !important;
  }
  
  .w-5 {
    width: 1rem !important;
    height: 1rem !important;
  }
  
  .h-5 {
    width: 1rem !important;
    height: 1rem !important;
  }
  
  .w-6 {
    width: 1.25rem !important;
    height: 1.25rem !important;
  }
  
  .h-6 {
    width: 1.25rem !important;
    height: 1.25rem !important;
  }
  
  /* تحسين Switch Component */
  .w-11 {
    width: 2.25rem !important;
  }
  
  .h-6 {
    height: 1.25rem !important;
  }
  
  /* تصغير المحتويات */
  .min-w-\\[140px\\] {
    min-width: 100px !important;
  }
  
  /* تحسين الـ Scrollbar للهواتف النقالة */
  .modern-scrollbar::-webkit-scrollbar {
    width: 2px !important;
    height: 2px !important;
  }
  
  /* تحسين النماذج والحقول */
  input, select, textarea {
    min-height: var(--mobile-input-height) !important;
    padding: var(--mobile-spacing-sm) var(--mobile-spacing-md) !important;
    font-size: 0.875rem !important;
    border-radius: var(--mobile-border-radius-sm) !important;
  }
  
  /* تحسين البطاقات */
  .card {
    padding: var(--mobile-spacing-md) !important;
    border-radius: var(--mobile-border-radius-md) !important;
    margin-bottom: var(--mobile-spacing-sm) !important;
  }
  
  /* تحسين القوائم */
  .menu-item {
    padding: var(--mobile-spacing-sm) var(--mobile-spacing-md) !important;
    font-size: 0.875rem !important;
    min-height: var(--mobile-tab-height) !important;
  }
  
  /* تحسين الجداول */
  table {
    font-size: 0.75rem !important;
  }
  
  th, td {
    padding: var(--mobile-spacing-xs) var(--mobile-spacing-sm) !important;
  }
  
  /* تحسين Modal Dialogs */
  .modal-content {
    margin: var(--mobile-spacing-sm) !important;
    border-radius: var(--mobile-border-radius-md) !important;
    max-height: calc(100vh - 2rem) !important;
  }
  
  /* تحسين التنقل */
  .navigation {
    height: var(--mobile-nav-height) !important;
    padding: var(--mobile-spacing-sm) !important;
  }
  
  .nav-item {
    padding: var(--mobile-spacing-sm) !important;
    font-size: 0.75rem !important;
    min-height: var(--mobile-button-height) !important;
  }
}

/* تحسينات إضافية للشاشات الصغيرة جداً */
@media (max-width: 480px) {
  :root {
    --mobile-spacing-xs: 3px;
    --mobile-spacing-sm: 6px;
    --mobile-spacing-md: 10px;
    --mobile-spacing-lg: 14px;
    --mobile-spacing-xl: 18px;
  }
  
  .grid-cols-2 {
    grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
  }
  
  .text-xl {
    font-size: 0.875rem !important;
  }
  
  .text-lg {
    font-size: 0.75rem !important;
  }
  
  .text-sm {
    font-size: 0.6875rem !important;
  }
  
  button {
    padding: 6px 10px !important;
    font-size: 0.6875rem !important;
  }
  
  .min-w-\\[100px\\] {
    min-width: 80px !important;
  }
}

/* تحسين الألوان للوضع المظلم والفاتح */
@media (max-width: 768px) {
  /* تحسين ألوان الخلفية */
  .bg-\\[\\#FAFAFA\\] {
    background-color: #fafafa !important;
  }
  
  .dark\\:bg-\\[\\#0A0A0A\\] {
    background-color: #0a0a0a !important;
  }
  
  /* تحسين ألوان الحدود */
  .border-\\[\\#E5E5E5\\] {
    border-color: #e5e5e5 !important;
  }
  
  .dark\\:border-\\[\\#1A1A1A\\] {
    border-color: #1a1a1a !important;
  }
  
  /* تحسين ألوان النصوص */
  .text-gray-900 {
    color: #111827 !important;
  }
  
  .dark\\:text-white {
    color: #ffffff !important;
  }
  
  .text-gray-500 {
    color: #6b7280 !important;
  }
  
  .dark\\:text-gray-400 {
    color: #9ca3af !important;
  }
  
  /* تحسين تأثيرات Hover للمس */
  .hover\\:bg-purple-500\\/10:hover {
    background-color: rgba(139, 92, 246, 0.1) !important;
  }
  
  .dark\\:hover\\:bg-purple-500\\/20:hover {
    background-color: rgba(139, 92, 246, 0.2) !important;
  }
  
  .hover\\:text-purple-500:hover {
    color: #8b5cf6 !important;
  }
  
  /* إزالة تأثيرات Hover على الشاشات اللمسية */
  @media (hover: none) {
    button:hover,
    .hover\\:bg-purple-500\\/10:hover,
    .dark\\:hover\\:bg-purple-500\\/20:hover,
    .hover\\:text-purple-500:hover {
      background-color: initial !important;
      color: initial !important;
    }
    
    /* إضافة تأثيرات Active بدلاً من Hover */
    button:active {
      transform: scale(0.98) !important;
      opacity: 0.8 !important;
    }
  }
}

/* تحسين الأداء للأجهزة المحمولة */
@media (max-width: 768px) {
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  input, textarea {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }
  
  .touch-optimized {
    touch-action: manipulation;
  }
  
  .smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
  
  /* تحسين التحريك */
  .will-change-transform {
    will-change: transform;
  }
  
  .will-change-scroll {
    will-change: scroll-position;
  }
  
  /* تقليل Motion للأجهزة الضعيفة */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* تحسين عرض الكود للموبايل */
@media (max-width: 768px) {
  .code-editor-mobile {
    font-size: 0.75rem !important;
    line-height: 1.3 !important;
  }
  
  .code-editor-mobile .cm-editor {
    font-size: 0.75rem !important;
  }
  
  .code-editor-mobile .cm-gutters {
    font-size: 0.625rem !important;
  }
  
  .code-editor-toolbar-mobile {
    padding: var(--mobile-spacing-xs) var(--mobile-spacing-sm) !important;
    border-bottom: 1px solid var(--bolt-elements-borderColor);
    display: flex;
    align-items: center;
    gap: var(--mobile-spacing-xs) !important;
    overflow-x: auto;
  }
  
  .code-editor-action-mobile {
    display: flex;
    align-items: center;
    gap: var(--mobile-spacing-xs) !important;
    padding: var(--mobile-spacing-xs) var(--mobile-spacing-sm) !important;
    border-radius: var(--mobile-border-radius-sm) !important;
    font-size: 0.625rem !important;
    white-space: nowrap;
    background: var(--bolt-elements-background-depth-2);
    border: 1px solid var(--bolt-elements-borderColor);
  }
}

/* تحسين الرسائل والإشعارات للموبايل */
@media (max-width: 768px) {
  .toast-mobile {
    position: fixed;
    top: var(--mobile-spacing-md) !important;
    left: var(--mobile-spacing-md) !important;
    right: var(--mobile-spacing-md) !important;
    padding: var(--mobile-spacing-sm) var(--mobile-spacing-md) !important;
    border-radius: var(--mobile-border-radius-sm) !important;
    background: var(--bolt-elements-background-depth-1);
    border: 1px solid var(--bolt-elements-borderColor);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 100;
    font-size: 0.75rem !important;
  }
  
  .notification-mobile {
    display: flex;
    align-items: center;
    gap: var(--mobile-spacing-sm) !important;
    padding: var(--mobile-spacing-sm) !important;
    border-radius: var(--mobile-border-radius-sm) !important;
    margin-bottom: var(--mobile-spacing-xs) !important;
  }
  
  .notification-icon-mobile {
    font-size: 1rem !important;
    flex-shrink: 0;
  }
  
  .notification-content-mobile {
    flex: 1;
  }
  
  .notification-title-mobile {
    font-size: 0.75rem !important;
    font-weight: 500;
    margin-bottom: 2px;
  }
  
  .notification-message-mobile {
    font-size: 0.625rem !important;
    color: var(--bolt-elements-textSecondary);
  }
}

/* تحسين الحقول والنماذج للموبايل */
@media (max-width: 768px) {
  .form-mobile {
    padding: var(--mobile-spacing-md) !important;
  }
  
  .input-mobile {
    width: 100%;
    padding: var(--mobile-spacing-sm) var(--mobile-spacing-md) !important;
    border: 1px solid var(--bolt-elements-borderColor);
    border-radius: var(--mobile-border-radius-sm) !important;
    font-size: 0.875rem !important;
    background: var(--bolt-elements-background-depth-2);
    color: var(--bolt-elements-textPrimary);
    min-height: var(--mobile-input-height) !important;
  }
  
  .input-mobile:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
  }
  
  .textarea-mobile {
    width: 100%;
    padding: var(--mobile-spacing-sm) var(--mobile-spacing-md) !important;
    border: 1px solid var(--bolt-elements-borderColor);
    border-radius: var(--mobile-border-radius-sm) !important;
    font-size: 0.875rem !important;
    background: var(--bolt-elements-background-depth-2);
    color: var(--bolt-elements-textPrimary);
    min-height: 100px !important;
    resize: vertical;
  }
  
  .select-mobile {
    width: 100%;
    padding: var(--mobile-spacing-sm) var(--mobile-spacing-md) !important;
    border: 1px solid var(--bolt-elements-borderColor);
    border-radius: var(--mobile-border-radius-sm) !important;
    font-size: 0.875rem !important;
    background: var(--bolt-elements-background-depth-2);
    color: var(--bolt-elements-textPrimary);
    min-height: var(--mobile-input-height) !important;
  }
}

/* تحسين التخطيط العام للموبايل */
@media (max-width: 768px) {
  .container-mobile {
    padding: var(--mobile-spacing-md) !important;
    max-width: 100%;
  }
  
  .sidebar-mobile {
    position: fixed;
    top: 0;
    left: -100%;
    width: 250px !important;
    height: 100vh;
    background: var(--bolt-elements-background-depth-1);
    border-right: 1px solid var(--bolt-elements-borderColor);
    transition: left 0.3s ease;
    z-index: 50;
  }
  
  .sidebar-mobile.open {
    left: 0;
  }
  
  .sidebar-overlay-mobile {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 49;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  
  .sidebar-overlay-mobile.visible {
    opacity: 1;
    visibility: visible;
  }
  
  .main-content-mobile {
    padding-bottom: 60px !important; /* مساحة لشريط الأدوات السفلي */
  }
}

/* تأثيرات الحركة المحسّنة للموبايل */
@media (max-width: 768px) {
  .fade-in-mobile {
    animation: fadeInMobile 0.2s ease-out;
  }
  
  .slide-up-mobile {
    animation: slideUpMobile 0.2s ease-out;
  }
  
  .scale-in-mobile {
    animation: scaleInMobile 0.15s ease-out;
  }
  
  @keyframes fadeInMobile {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  @keyframes slideUpMobile {
    from {
      transform: translateY(15px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  @keyframes scaleInMobile {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
}

/* تحسين الأداء للموبايل */
@media (max-width: 768px) {
  .smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
  
  /* تحسين دقة النص */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
}

/* تحسينات خاصة لـ Control Panel */
@media (max-width: 768px) {
  /* جعل Control Panel يملأ الشاشة */
  [role="dialog"] {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    margin: 0 !important;
  }
  
  /* تحسين Header في Control Panel */
  .control-panel-header {
    position: sticky !important;
    top: 0 !important;
    z-index: 10 !important;
    background: var(--theme-bg-primary) !important;
    backdrop-filter: blur(10px) !important;
  }
  
  /* تحسين شبكة التبويبات */
  .tabs-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: var(--mobile-spacing-sm) !important;
    padding: var(--mobile-spacing-md) !important;
  }
  
  /* تحسين بطاقات التبويبات */
  .tab-card {
    aspect-ratio: 1.1 / 1 !important;
    padding: var(--mobile-spacing-sm) !important;
    border-radius: var(--mobile-border-radius-md) !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    text-align: center !important;
  }
  
  .tab-card .icon {
    font-size: 1.25rem !important;
    margin-bottom: var(--mobile-spacing-xs) !important;
  }
  
  .tab-card .title {
    font-size: 0.75rem !important;
    font-weight: 500 !important;
    line-height: 1.2 !important;
  }
  
  .tab-card .description {
    font-size: 0.625rem !important;
    color: var(--theme-text-secondary) !important;
    margin-top: var(--mobile-spacing-xs) !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
  }
}

/* تحسينات إضافية للشاشات الصغيرة جداً (أقل من 400px) */
@media (max-width: 400px) {
  :root {
    --mobile-spacing-xs: 2px;
    --mobile-spacing-sm: 4px;
    --mobile-spacing-md: 8px;
    --mobile-spacing-lg: 12px;
    --mobile-spacing-xl: 16px;
  }
  
  .tabs-grid {
    grid-template-columns: repeat(1, 1fr) !important;
  }
  
  .tab-card {
    aspect-ratio: 2.5 / 1 !important;
    flex-direction: row !important;
    text-align: left !important;
    padding: var(--mobile-spacing-md) !important;
  }
  
  .tab-card .icon {
    font-size: 1rem !important;
    margin-bottom: 0 !important;
    margin-right: var(--mobile-spacing-sm) !important;
    flex-shrink: 0 !important;
  }
  
  .tab-card .content {
    flex: 1 !important;
  }
  
  .tab-card .title {
    font-size: 0.6875rem !important;
  }
  
  .tab-card .description {
    font-size: 0.5625rem !important;
    -webkit-line-clamp: 1 !important;
  }
}